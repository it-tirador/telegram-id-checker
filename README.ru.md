# Telegram Group & Topic ID Checker

_Читать на [английском](README.md) | [русском](README.ru.md)_

Этот проект предназначен для автоматического получения идентификаторов (ID) и названий всех групп (чатов) и всех тем (topics) в этих группах, где бот является участником и в темах есть сообщения.

## Функционал
- Определяет `chat_id` и название каждой группы/чата, где есть бот.
- Для каждой группы определяет все известные темы (topics): их `topic_id` и название (если возможно).
- Вся информация автоматически сохраняется в файл `topics.json`:

```json
{
  "my_bot": {
    "-1001111111111": {
      "chat_title": "Example Group",
      "topics": {
        "101": "General Discussion",
        "102": "Support"
      }
    }
  },
  "another_bot": {
    "-1002222222222": {
      "chat_title": "Project Team",
      "topics": {
        "201": "Development",
        "202": "Announcements"
      }
    }
  }
}
```

- Для каждого username бота (`my_bot`, `another_bot` и т.д.) создаётся отдельная ветка с группами и темами.
- Данные по разным ботам не перезаписываются и не теряются при повторных запусках.

## Как это работает
1. Скрипт обращается к Telegram API и получает все апдейты, связанные с ботом.
2. Находит все уникальные группы/чаты, где есть бот.
3. Для каждой группы собирает все известные темы (topics), в которых были сообщения с ботом или пользователями.
4. Сохраняет всю информацию в `topics.json` в разделе, соответствующем username текущего бота.

## Как использовать
1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
2. Создайте файл `.env` и укажите в нём:
   ```env
   BOT_TOKEN=ваш_токен_бота
   ```
3. Запустите скрипт:
   ```bash
   python main.py
   ```
4. После выполнения в файле `topics.json` будет актуальная информация по всем группам и темам для всех ваших ботов.

## Важно
- Бот должен быть добавлен в группу и иметь права администратора.
- Темы появятся только если в них были сообщения от пользователей (бот не всегда видит свои сообщения).
- Название темы сохраняется только если бот видел событие её создания.
- Данные по разным ботам не перезаписываются — для каждого username бота создаётся свой раздел.

---

**Проект работает на Windows, все команды можно выполнять в PowerShell.** 